"use strict";(self["webpackChunkadlash"]=self["webpackChunkadlash"]||[]).push([[355],{5355:function(e,a,n){n.r(a),n.d(a,{default:function(){return ve}});n(4114);var t=n(641),l=n(953),o=n(3751),s=n(33),r=n(1299),i=n(7977),u=n(8162),c=n(5590),d=n(4830),p=n(2964),m=n(5220),v=n(5246),g=n(9180),k=(n(6141),n(1250));n(8953);const f=e=>((0,t.Qi)("data-v-9a7efc14"),e=e(),(0,t.jt)(),e),b={class:"Employment Information"},L={class:"cont3"},h={class:"left4"},y={class:"logo1"},_=["src"],I={class:"icons"},S={href:"#",class:"btn-amount"},x=["src"],N=f((()=>(0,t.Lk)("p",null,"Amount",-1))),R={href:"#",class:"btn-loan-brkdwn"},w=["src"],C=f((()=>(0,t.Lk)("p",null,"Loan Breakdown",-1))),K={href:"#",class:"btn-info"},A=["src"],D=f((()=>(0,t.Lk)("p",null,"Personal Information",-1))),P={href:"#",class:"btn-info2"},O=["src"],E=f((()=>(0,t.Lk)("p",null,"Contact Information",-1))),J={class:"active"},B={href:"#",class:"btn-info3"},V=["src"],W=f((()=>(0,t.Lk)("p",null,"Employment Information",-1))),j={class:"form-margin"},q=f((()=>(0,t.Lk)("label",{for:"Organisation"},[(0,t.eW)("Organisation"),(0,t.Lk)("span",{class:"text-red"},"*")],-1))),z=f((()=>(0,t.Lk)("br",null,null,-1))),F={class:"form-margin"},U=f((()=>(0,t.Lk)("label",{for:"IPPIS"},[(0,t.eW)("IPPIS Number"),(0,t.Lk)("span",{class:"text-red"},"*")],-1))),$=f((()=>(0,t.Lk)("br",null,null,-1))),X={class:"form-margin"},G=f((()=>(0,t.Lk)("label",{for:"staff-id"},[(0,t.eW)("Staff ID Image (formats: JPG, PNG, PDF)"),(0,t.Lk)("span",{class:"text-red"},"*")],-1))),T=f((()=>(0,t.Lk)("br",null,null,-1))),Q={class:"form-margin"},H=f((()=>(0,t.Lk)("label",{for:"valid-id"},[(0,t.eW)("Valid ID Image (e.g. Passport, Drivers License, Voters card, etc.)"),(0,t.Lk)("span",{class:"text-red"},"*")],-1))),M=f((()=>(0,t.Lk)("br",null,null,-1))),Y={class:"form-margin"},Z=f((()=>(0,t.Lk)("label",{for:"Salary Bank Name"},[(0,t.eW)("Salary Bank Name"),(0,t.Lk)("span",{class:"text-red"},"*")],-1))),ee=f((()=>(0,t.Lk)("option",{value:"",disabled:""},"Select Bank",-1))),ae=["value"],ne={class:"form-margin"},te=f((()=>(0,t.Lk)("label",{for:"Salary Bank Account"},[(0,t.eW)("Salary Bank Account"),(0,t.Lk)("span",{class:"text-red"},"*")],-1))),le=f((()=>(0,t.Lk)("br",null,null,-1))),oe={id:"account-name",style:{"margin-top":"10px","font-weight":"bold"}},se={class:"bit"},re=["disabled"],ie=f((()=>(0,t.Lk)("div",{class:"image1"},null,-1))),ue="http://192.168.1.46",ce="6552a219-b30a-4764-95b4-d7996a74ed7c";var de={__name:"ApplyStep5",setup(e){const a=(0,v.dj)(),n=(0,m.rd)(),f=(0,l.KR)({}),de=(0,l.KR)([]),pe=(0,l.KR)(""),me=(0,l.KR)(""),ve=(0,l.KR)(""),ge=(0,l.KR)(""),ke=(0,l.KR)(!1),fe=(0,l.KR)(!1),be=(0,l.KR)(""),Le=(0,l.KR)(""),he=(0,l.KR)(),ye=(0,l.KR)(),_e=async()=>{console.log(g.A),k.A.get(`${ue}/api/banks`,{headers:{"x-sentinel-key":ce}}).then((e=>{de.value=e.data.data})).catch((e=>{422==e.response.status?a.error(e.response.data.message):a.error("Something went wrong!")}))},Ie=async()=>{fe.value=!1;JSON.parse(sessionStorage.getItem("formData"));if(10!==ve.value.length||isNaN(ve.value)||null==me.value)return void(be.value="");let e=de.value?.filter((e=>e.code==me.value&&e.giro_code));if(!e.length)return void(be.value="");let a=e[0]["giro_code"];ge.value=!0;const n={account_number:ve.value,bank_code:a};k.A.post(`${ue}/api/banks/account/validate`,n,{headers:{"x-sentinel-key":ce}}).then((e=>{fe.value=!0,ge.value=!1,be.value=e.data.data.accountName})).catch((e=>{ge.value=!1,422==e.response.status?be.value=e.response.data.message:be.value="Invalid account number or bank"}))},Se=e=>{const a=e.target;he.value=a.files?.[0]||null},xe=e=>{const a=e.target;ye.value=a.files?.[0]||null},Ne=JSON.parse(sessionStorage.getItem("formData")),Re={loan_type:parseInt(Ne.loanType),product_id:Ne.productId,bvn:Ne.bvn,nin:Ne.nin,otp:Ne.otp,sessionId:Ne.sessionId,organization:pe.value,amount:parseInt(Ne.amount),address:Ne.houseNumber+", "+Ne.houseStreet,city:Ne.city,account_number:Ne.bankAccount,bank_code:Ne.bankCode,remita_bank_code:Ne.remitaBankCode,state:parseInt(Ne.state),reffered_by:Ne.referralCode||"",user_id:f.value?.id,tenor:Ne.tenor},we=async()=>{try{ke.value=!0,Re.user_id=f.value.id,Re.organization=pe.value,Re.account_number=ve.value,Re.remita_bank_code=me.value;let e=de.value?.filter((e=>e.code==me.value&&e.giro_code));if(e.length){let a=e[0]["giro_code"];Re.bank_code=a.value}console.log("loanData",Re);const t=new FormData;t.append("staff_id_file",he.value),t.append("valid_id_file",ye.value);for(const a in Re)Object.hasOwn(Re,a)&&t.append(a,void 0==Re[a]?null:Re[a]);k.A.post(`${ue}/api/loan/apply`,t,{headers:{"Content-Type":"multipart/form-data","x-sentinel-key":ce}}).then((e=>{console.log(e.data),ke.value=!1,n.push("/application-complete")})).catch((e=>{ke.value=!1,console.log(e),422==e.response.status?a.error(e.response.data.message):a.error("Something went wrong!")}))}catch(e){console.error("Error applying for loan:",e)}},Ce=async e=>{console.log("register user",e);try{g.A.register(e).then((e=>{f.value={id:e.data?.data.id},we()})).catch((e=>{console.log(e),ke.value=!1,422==e.response.status?a.error(e.response.data.message):a.error("Something went wrong!")}))}catch(n){console.log(n)}},Ke=()=>{try{const e=JSON.parse(sessionStorage.getItem("formData"));if(!e)throw new Error("Form data not found");Ce({title:e.title,first_name:e.firstName,last_name:e.lastName,email:e.email,phone_number:e.phone,gender:e.gender,date_of_birth:e.dateOfBirth,ippis_number:e.ippisNumber,bvn:e.bvn,nin:e.nin})}catch(e){console.error("Error registering user from form data:",e)}},Ae=()=>{const e=JSON.parse(sessionStorage.getItem("formData"));e&&(Le.value=e.ippisNumber||"",me.value=e.bankCode||"",ve.value=e.bankAccount||"",pe.value=e?.organization||"")};(0,t.sV)((()=>{Ae(),_e()}));const De=()=>{const e={ippisNumber:Le.value,bankCode:me.value,bankAccount:ve.value,organization:pe.value},a=JSON.parse(sessionStorage.getItem("formData"))||{},n={...a,...e};sessionStorage.setItem("formData",JSON.stringify(n)),ke.value=!0,Ke()};return(e,a)=>{const n=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("section",b,[(0,t.Lk)("div",L,[(0,t.Lk)("div",h,[(0,t.Lk)("div",y,[(0,t.Lk)("img",{src:(0,l.R1)(r),alt:""},null,8,_)]),(0,t.Lk)("div",I,[(0,t.Lk)("div",null,[(0,t.Lk)("a",S,[(0,t.Lk)("img",{src:(0,l.R1)(i),alt:""},null,8,x)]),N]),(0,t.Lk)("div",null,[(0,t.Lk)("a",R,[(0,t.Lk)("img",{src:(0,l.R1)(u),alt:""},null,8,w)]),C]),(0,t.Lk)("div",null,[(0,t.Lk)("a",K,[(0,t.Lk)("img",{src:(0,l.R1)(c),alt:""},null,8,A)]),D]),(0,t.Lk)("div",null,[(0,t.Lk)("a",P,[(0,t.Lk)("img",{src:(0,l.R1)(d),alt:""},null,8,O)]),E]),(0,t.Lk)("div",J,[(0,t.Lk)("a",B,[(0,t.Lk)("img",{src:(0,l.R1)(p),alt:""},null,8,V)]),W])]),(0,t.Lk)("form",{class:"info3",onSubmit:(0,o.D$)(De,["prevent"])},[(0,t.Lk)("div",j,[q,z,(0,t.bo)((0,t.Lk)("input",{type:"text",placeholder:"Enter organization","onUpdate:modelValue":a[0]||(a[0]=e=>pe.value=e),required:""},null,512),[[o.Jo,pe.value]])]),(0,t.Lk)("div",F,[U,$,(0,t.bo)((0,t.Lk)("input",{type:"number",id:"IPPIS",name:"","onUpdate:modelValue":a[1]||(a[1]=e=>Le.value=e),required:""},null,512),[[o.Jo,Le.value]])]),(0,t.Lk)("div",X,[G,T,(0,t.Lk)("input",{type:"file",id:"staff-id",accept:".jpg,.png,.jpeg,.pdf",name:"staff-id",onChange:Se,required:""},null,32)]),(0,t.Lk)("div",Q,[H,M,(0,t.Lk)("input",{type:"file",id:"valid-id",accept:".jpg,.png,.jpeg,.pdf",name:"valid-id",onChange:xe,required:""},null,32)]),(0,t.Lk)("div",Y,[Z,(0,t.Lk)("div",null,[(0,t.bo)((0,t.Lk)("select",{id:"bank-name","onUpdate:modelValue":a[2]||(a[2]=e=>me.value=e),onChange:Ie,class:"form-padding",required:""},[ee,((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(de.value,(e=>((0,t.uX)(),(0,t.CE)("option",{value:e.code,key:e.code},(0,s.v_)(e.name),9,ae)))),128))],544),[[o.u1,me.value]])])]),(0,t.Lk)("div",ne,[te,le,(0,t.bo)((0,t.Lk)("input",{type:"text",id:"bank-account","onUpdate:modelValue":a[3]||(a[3]=e=>ve.value=e),name:"",pattern:"[0-9]{10}",onKeyup:Ie,required:""},null,544),[[o.Jo,ve.value]]),(0,t.Lk)("p",oe,(0,s.v_)(ge.value?"validating...":be.value),1)]),(0,t.Lk)("div",se,[(0,t.bF)(n,{to:"/apply-step4",class:"prev"},{default:(0,t.k6)((()=>[(0,t.eW)("PREV")])),_:1}),(0,t.Lk)("button",{id:"submit-btn",type:"submit",class:"Submit",disabled:ge.value||ke.value},(0,s.v_)(ke.value?"Please Wait...":"Submit"),9,re)])],32)]),ie])])}}},pe=n(6262);const me=(0,pe.A)(de,[["__scopeId","data-v-9a7efc14"]]);var ve=me},7977:function(e,a,n){e.exports=n.p+"img/amount-stepper-icon 1.6a42f57f.svg"},8162:function(e,a,n){e.exports=n.p+"img/breakdown-stepper-icon 1.a186ec32.svg"},4830:function(e,a,n){e.exports=n.p+"img/contact-info-stepper-icon 1.5e312d17.svg"},2964:function(e,a,n){e.exports=n.p+"img/employment-info-stepper-icon 1.c1f0fa3a.svg"},5590:function(e,a,n){e.exports=n.p+"img/personal-info-stepper-icon 1.21bdd72e.svg"},1299:function(e,a,n){e.exports=n.p+"img/credit-flex-logo.2c250582.png"}}]);